(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"305l":function(e,o,s){"use strict";s.r(o),s.d(o,"AuthModule",(function(){return Q}));var r=s("ofXK"),t=s("tyNb"),i=s("3Pt+"),n=s("fXoL"),a=s("cZOq"),c=s("XiUz"),d=s("NFeN"),b=s("bTqV"),l=s("kmnG"),m=s("qFsG"),u=s("JQvQ");function f(e,o){1&e&&(n.Qb(0,"mat-error"),n.xc(1," Please enter your Password "),n.Pb())}function w(e,o){if(1&e){const e=n.Rb();n.Qb(0,"form",5),n.Qb(1,"h1",6),n.xc(2,"Login To your Account"),n.Pb(),n.Qb(3,"h3",7),n.xc(4),n.Pb(),n.Qb(5,"div",8),n.Qb(6,"div",9),n.Qb(7,"mat-form-field",10),n.Qb(8,"mat-label"),n.xc(9,"Email"),n.Pb(),n.Mb(10,"input",11),n.Qb(11,"mat-error"),n.xc(12," Please enter your Email "),n.Pb(),n.Pb(),n.Pb(),n.Qb(13,"div",9),n.Qb(14,"mat-form-field",10),n.Qb(15,"mat-label"),n.xc(16,"Password"),n.Pb(),n.Mb(17,"input",12),n.Qb(18,"mat-icon",13),n.Yb("click",(function(){n.oc(e);const o=n.cc();return o.hide=!o.hide})),n.xc(19),n.Pb(),n.wc(20,f,2,0,"mat-error",14),n.Pb(),n.Pb(),n.Qb(21,"div",15),n.Qb(22,"button",16),n.Yb("click",(function(){return n.oc(e),n.cc().forgotPassword()})),n.xc(23,"Forgot & Reset Password"),n.Pb(),n.Qb(24,"button",17),n.Yb("click",(function(){return n.oc(e),n.cc().signIn()})),n.xc(25,"Login"),n.Pb(),n.Pb(),n.Pb(),n.Pb()}if(2&e){const e=n.cc();n.hc("formGroup",e.signInForm),n.Ab(4),n.yc(e.message),n.Ab(13),n.hc("type",e.hide?"password":"text"),n.Ab(2),n.yc(e.hide?"visibility_off":"visibility"),n.Ab(1),n.hc("ngIf",e.signInForm.get("password").touched&&e.signInForm.get("password").invalid)}}function P(e,o){1&e&&(n.Qb(0,"span"),n.xc(1," Please enter Password again "),n.Pb())}function h(e,o){1&e&&(n.Qb(0,"span"),n.xc(1," Please enter the Confirm Password same as Password "),n.Pb())}function g(e,o){if(1&e){const e=n.Rb();n.Qb(0,"form",5),n.Qb(1,"h2",6),n.xc(2,"Enter new Password and the Verification Code that was sent to your email address to reset your password."),n.Pb(),n.Qb(3,"h3",7),n.xc(4),n.Pb(),n.Qb(5,"div",8),n.Qb(6,"div",9),n.Qb(7,"mat-form-field",10),n.Qb(8,"mat-label"),n.xc(9,"Password"),n.Pb(),n.Mb(10,"input",12),n.Qb(11,"mat-icon",13),n.Yb("click",(function(){n.oc(e);const o=n.cc();return o.passwordHide=!o.passwordHide})),n.xc(12),n.Pb(),n.Qb(13,"mat-error"),n.xc(14," Please enter Password "),n.Pb(),n.Pb(),n.Pb(),n.Qb(15,"div",9),n.Qb(16,"mat-form-field",10),n.Qb(17,"mat-label"),n.xc(18,"Confirm Password"),n.Pb(),n.Mb(19,"input",18),n.Qb(20,"mat-icon",13),n.Yb("click",(function(){n.oc(e);const o=n.cc();return o.confirmPasswordHide=!o.confirmPasswordHide})),n.xc(21),n.Pb(),n.Qb(22,"mat-error"),n.wc(23,P,2,0,"span",14),n.wc(24,h,2,0,"span",14),n.Pb(),n.Pb(),n.Pb(),n.Qb(25,"div",9),n.Qb(26,"mat-form-field",10),n.Qb(27,"mat-label"),n.xc(28,"Verification Code"),n.Pb(),n.Mb(29,"input",19),n.Qb(30,"mat-error"),n.xc(31," Please enter the 6 digits Verification Code that was sent your Email Address "),n.Pb(),n.Pb(),n.Pb(),n.Qb(32,"div",15),n.Qb(33,"button",17),n.Yb("click",(function(){return n.oc(e),n.cc().newPasswordSubmit()})),n.xc(34,"Submit"),n.Pb(),n.Pb(),n.Pb(),n.Pb()}if(2&e){const e=n.cc();n.hc("formGroup",e.newPasswordForm),n.Ab(4),n.yc(e.message),n.Ab(6),n.hc("type",e.passwordHide?"password":"text"),n.Ab(2),n.zc(" ",e.passwordHide?"visibility_off":"visibility",""),n.Ab(7),n.hc("type",e.confirmPasswordHide?"password":"text"),n.Ab(2),n.zc(" ",e.confirmPasswordHide?"visibility_off":"visibility",""),n.Ab(2),n.hc("ngIf",e.newPasswordForm.get("confirmPassword").hasError("required")),n.Ab(1),n.hc("ngIf",e.newPasswordForm.get("confirmPassword").hasError("Different Password entered"))}}const p=[{path:"",component:(()=>{class e{constructor(e,o){this.router=e,this.authorisationService=o,this.hide=!0,this.passwordHide=!0,this.confirmPasswordHide=!0,this.forgotAndResetPassword=!1,this.buildSignInForm(),this.buildNewPasswordForm()}ngOnInit(){console.log("Checking logged in state")}signIn(){this.signInForm.markAllAsTouched(),this.signInForm.valid&&this.authorisationService.signIn(this.signInForm.getRawValue()).subscribe(e=>this.handleSignInResponse(e),e=>this.handleSignInError(e))}forgotPassword(){this.message=void 0,this.signInForm.get("password").markAsUntouched(),this.signInForm&&this.signInForm.get("email")&&this.signInForm.get("email").valid&&(this.signInForm.get("email").markAsTouched(),this.authorisationService.forgotPassword({email:this.signInForm.getRawValue().email}).subscribe(e=>this.handleForgotPasswordResponse(e),e=>this.handleForgotPasswordError(e)))}signOut(){}newPasswordSubmit(){this.message=void 0,this.newPasswordForm&&this.newPasswordForm.valid&&this.authorisationService.updatePassword(this.newPasswordForm.getRawValue()).subscribe(e=>this.hadleNewPasswordSubmitResponse(e),e=>this.handleNewPasswordSubmitError(e))}onCreateAccount(){this.router.navigate(["../register"])}buildSignInForm(){this.signInForm=new i.f({email:new i.d("",[i.s.required,i.s.email]),password:new i.d("",[i.s.required])})}buildNewPasswordForm(){this.newPasswordForm=new i.f({email:new i.d("",[i.s.required,i.s.email]),password:new i.d("",[i.s.required]),confirmPassword:new i.d("",[i.s.required]),verificationCode:new i.d(null,[i.s.required])},this.passwordConfirming)}passwordConfirming(e){if(e.get("password").value!==e.get("confirmPassword").value)return e.get("confirmPassword").setErrors({"Different Password entered":!0}),{invalid:!0}}handleSignInResponse(e){console.log(e),e&&401===e.body.status&&(this.message="Invalid Credentials")}handleSignInError(e){e&&401===e.status&&(this.message="Invalid Credentials. Please enter your registered Email Address and Password to login")}handleForgotPasswordResponse(e){this.forgotAndResetPassword=!0,this.newPasswordForm.reset(),this.newPasswordForm.get("email").setValue(e.body.email),this.message=void 0}handleForgotPasswordError(e){this.forgotAndResetPassword=!1,this.message=e.error.message||"Some error occurred while Reseting the Password."}hadleNewPasswordSubmitResponse(e){this.forgotAndResetPassword=!1}handleNewPasswordSubmitError(e){this.message=this.message=e.error.message||"Some error occurred while Reseting the Password.",this.forgotAndResetPassword=!0}}return e.\u0275fac=function(o){return new(o||e)(n.Lb(t.a),n.Lb(a.a))},e.\u0275cmp=n.Fb({type:e,selectors:[["app-login"]],decls:9,vars:2,consts:[["fxLayout","row wrap","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap","15px",1,"container"],["fxLayout","column","fxFlex","0 1 calc(50%-15px)"],["fxLayout","column","fxFlex","100%",3,"formGroup",4,"ngIf"],["fxLayout","column","fxFlex","50%","fxLayoutAlign","center center",1,"account-overlay"],["mat-button","",3,"click"],["fxLayout","column","fxFlex","100%",3,"formGroup"],["fxLayoutAlign","center"],[1,"error"],["fxLayout","row wrap","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap.xs","15px","fxLayoutGap.sm","15px","fxLayoutAlign","center"],["fxFlex","0 1 calc(100%-15px)","fxLayoutAlign","center",1,"form-field-container"],["appearance","fill"],["matInput","","placeholder","Email","formControlName","email","required",""],["matInput","","placeholder","Password","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],[4,"ngIf"],["fxFlex","0 1 calc(100%-15px)","fxLayoutAlign","end center"],["fxFlex","50%","mat-button","","color","primary",3,"click"],["fxFlex","50%","mat-raised-button","","color","warn",3,"click"],["matInput","","placeholder","Confirm Password","formControlName","confirmPassword","required","",3,"type"],["matInput","","placeholder","Email","formControlName","verificationCode","minlength","6","maxlength","6","appDigitsOnly","","required",""]],template:function(e,o){1&e&&(n.Qb(0,"div",0),n.Qb(1,"div",1),n.wc(2,w,26,5,"form",2),n.wc(3,g,35,8,"form",2),n.Pb(),n.Qb(4,"div",3),n.Qb(5,"mat-icon"),n.xc(6,"lock"),n.Pb(),n.Qb(7,"button",4),n.Yb("click",(function(){return o.onCreateAccount()})),n.xc(8," CREATE AN ACCOUNT "),n.Pb(),n.Pb(),n.Pb()),2&e&&(n.Ab(2),n.hc("ngIf",!o.forgotAndResetPassword),n.Ab(1),n.hc("ngIf",o.forgotAndResetPassword))},directives:[c.c,c.d,c.a,r.k,c.b,d.a,b.b,i.t,i.o,i.g,l.c,l.f,m.b,i.c,i.n,i.e,i.r,l.b,l.g,u.a,i.j,i.i],styles:[""]}),e})()},{path:"register",component:s("HamO").a}];let x=(()=>{class e{}return e.\u0275mod=n.Jb({type:e}),e.\u0275inj=n.Ib({factory:function(o){return new(o||e)},imports:[[t.c.forChild(p)],t.c]}),e})();var y=s("PCNd");let Q=(()=>{class e{}return e.\u0275mod=n.Jb({type:e}),e.\u0275inj=n.Ib({factory:function(o){return new(o||e)},imports:[[r.c,x,y.a]]}),e})()}}]);